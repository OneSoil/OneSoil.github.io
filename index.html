<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content=""><meta name="keywords" content=""><meta name="author" content="Hairui Wang"><meta name="copyright" content="Hairui Wang"><title>Less hesitation, More action | WHR blogs</title><link rel="shortcut icon" href="https://i.loli.net/2021/01/14/e3vagq7WDQYRb2u.png"><link rel="stylesheet" href="/css/index.css?version=1.9.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?ef7a543c3e7a72310eea0007355b0331";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  hexoVersion: '5.3.0'
} </script><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="WHR blogs" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="false"><div class="author-info"><div class="author-info__avatar text-center"><img src="https://i.loli.net/2021/01/14/STbxQl9M7XLJUkY.jpg"></div><div class="author-info__name text-center">Hairui Wang</div><div class="author-info__description text-center"></div><div class="follow-button"><a target="_blank" rel="noopener" href="https://github.com/Onehr7">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">33</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">19</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">9</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Links</div><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://leetcode-cn.com/u/edocteel-3/">Leetcode</a></div></div></div><nav id="nav" style="background-image: url(https://i.loli.net/2021/01/14/aJn4RNHLOvf3dDj.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">WHR blogs</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"></span></div><div id="site-info"><div id="site-title">WHR blogs</div><div id="site-sub-title">Less hesitation, More action</div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="/2021/05/28/Pyinstall%E6%89%93%E5%8C%85ssl%E9%AA%8C%E8%AF%81%E9%94%99%E8%AF%AF/">Pyinstall打包ssl验证错误</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-05-28</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Python/">Python</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/PyInstaller/">PyInstaller</a></span><div class="content"><p>使用Google api，程序能正常运行，但使用PyInstaller打包后出现ssl验证错误</p>
<blockquote>
<p>Error: Exception in ‘grpc._cython.cygrpc.ssl_roots_override_callback’ ignored</p>
<p>assertion failed: pem_root_certs != nullptr</p>
</blockquote>
<ul>
<li><p>解决办法</p>
<p>找到Python安装路径下的\Lib\site-packages\grpc_cython_credentials\roots.pem,</p>
<p>并拷贝到打包后的exe文件目录下。</p>
</li>
</ul>
<ul>
<li><p>参考链接</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/grpc/grpc/issues/9223#issuecomment-412054216">https://github.com/grpc/grpc/issues/9223#issuecomment-412054216</a></p>
</blockquote>
</li>
</ul>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2021/05/24/PyQt5%E9%98%B2%E6%AD%A2%E7%95%8C%E9%9D%A2%E6%98%BE%E7%A4%BA%E4%B8%8D%E5%85%A8%E5%92%8C%E5%81%87%E6%AD%BB/">PyQt5解决界面显示不全和假死</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-05-24</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Python/">Python</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/PyQt5/">PyQt5</a></span><div class="content"><h5 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h5><blockquote>
<p>在PyQt应用中，当程序执行耗时操作时，界面出现假死卡顿的状态，最终通过Pyqt的多线程（QThread）和信号（pyqtSignal）解决</p>
</blockquote>
<h5 id="测试代码"><a href="#测试代码" class="headerlink" title="测试代码"></a>测试代码</h5><ul>
<li>queryUI.py</li>
</ul>
<pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 请求框UI</span>
<span class="token comment" spellcheck="true"># -*- coding: utf-8 -*-</span>

<span class="token comment" spellcheck="true"># Form implementation generated from reading ui file 'query.ui'</span>
<span class="token comment" spellcheck="true">#</span>
<span class="token comment" spellcheck="true"># Created by: PyQt5 UI code generator 5.15.4</span>
<span class="token comment" spellcheck="true">#</span>
<span class="token comment" spellcheck="true"># WARNING: Any manual changes made to this file will be lost when pyuic5 is</span>
<span class="token comment" spellcheck="true"># run again.  Do not edit this file unless you know what you are doing.</span>


<span class="token keyword">from</span> PyQt5 <span class="token keyword">import</span> QtCore<span class="token punctuation">,</span> QtGui<span class="token punctuation">,</span> QtWidgets


<span class="token keyword">class</span> <span class="token class-name">Ui_Dialog</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">setupUi</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> Dialog<span class="token punctuation">)</span><span class="token punctuation">:</span>
        Dialog<span class="token punctuation">.</span>setObjectName<span class="token punctuation">(</span><span class="token string">"Dialog"</span><span class="token punctuation">)</span>
        Dialog<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token number">246</span><span class="token punctuation">,</span> <span class="token number">148</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>label <span class="token operator">=</span> QtWidgets<span class="token punctuation">.</span>QLabel<span class="token punctuation">(</span>Dialog<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>label<span class="token punctuation">.</span>setGeometry<span class="token punctuation">(</span>QtCore<span class="token punctuation">.</span>QRect<span class="token punctuation">(</span><span class="token number">70</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">131</span><span class="token punctuation">,</span> <span class="token number">61</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        font <span class="token operator">=</span> QtGui<span class="token punctuation">.</span>QFont<span class="token punctuation">(</span><span class="token punctuation">)</span>
        font<span class="token punctuation">.</span>setFamily<span class="token punctuation">(</span><span class="token string">"Agency FB"</span><span class="token punctuation">)</span>
        font<span class="token punctuation">.</span>setPointSize<span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>label<span class="token punctuation">.</span>setFont<span class="token punctuation">(</span>font<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>label<span class="token punctuation">.</span>setObjectName<span class="token punctuation">(</span><span class="token string">"label"</span><span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>retranslateUi<span class="token punctuation">(</span>Dialog<span class="token punctuation">)</span>
        QtCore<span class="token punctuation">.</span>QMetaObject<span class="token punctuation">.</span>connectSlotsByName<span class="token punctuation">(</span>Dialog<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">retranslateUi</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> Dialog<span class="token punctuation">)</span><span class="token punctuation">:</span>
        _translate <span class="token operator">=</span> QtCore<span class="token punctuation">.</span>QCoreApplication<span class="token punctuation">.</span>translate
        Dialog<span class="token punctuation">.</span>setWindowTitle<span class="token punctuation">(</span>_translate<span class="token punctuation">(</span><span class="token string">"Dialog"</span><span class="token punctuation">,</span> <span class="token string">"测试请求"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>label<span class="token punctuation">.</span>setText<span class="token punctuation">(</span>_translate<span class="token punctuation">(</span><span class="token string">"Dialog"</span><span class="token punctuation">,</span> <span class="token string">"正在请求 . . ."</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<ul>
<li>testUI.py</li>
</ul>
<pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 主界面UI</span>
<span class="token comment" spellcheck="true"># -*- coding: utf-8 -*-</span>

<span class="token comment" spellcheck="true"># Form implementation generated from reading ui file 'test.ui'</span>
<span class="token comment" spellcheck="true">#</span>
<span class="token comment" spellcheck="true"># Created by: PyQt5 UI code generator 5.15.4</span>
<span class="token comment" spellcheck="true">#</span>
<span class="token comment" spellcheck="true"># WARNING: Any manual changes made to this file will be lost when pyuic5 is</span>
<span class="token comment" spellcheck="true"># run again.  Do not edit this file unless you know what you are doing.</span>


<span class="token keyword">from</span> PyQt5 <span class="token keyword">import</span> QtCore<span class="token punctuation">,</span> QtGui<span class="token punctuation">,</span> QtWidgets


<span class="token keyword">class</span> <span class="token class-name">Ui_Form</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">setupUi</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> Form<span class="token punctuation">)</span><span class="token punctuation">:</span>
        Form<span class="token punctuation">.</span>setObjectName<span class="token punctuation">(</span><span class="token string">"Form"</span><span class="token punctuation">)</span>
        Form<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token number">276</span><span class="token punctuation">,</span> <span class="token number">180</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>pushButton <span class="token operator">=</span> QtWidgets<span class="token punctuation">.</span>QPushButton<span class="token punctuation">(</span>Form<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>pushButton<span class="token punctuation">.</span>setGeometry<span class="token punctuation">(</span>QtCore<span class="token punctuation">.</span>QRect<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>pushButton<span class="token punctuation">.</span>setObjectName<span class="token punctuation">(</span><span class="token string">"pushButton"</span><span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>retranslateUi<span class="token punctuation">(</span>Form<span class="token punctuation">)</span>
        QtCore<span class="token punctuation">.</span>QMetaObject<span class="token punctuation">.</span>connectSlotsByName<span class="token punctuation">(</span>Form<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">retranslateUi</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> Form<span class="token punctuation">)</span><span class="token punctuation">:</span>
        _translate <span class="token operator">=</span> QtCore<span class="token punctuation">.</span>QCoreApplication<span class="token punctuation">.</span>translate
        Form<span class="token punctuation">.</span>setWindowTitle<span class="token punctuation">(</span>_translate<span class="token punctuation">(</span><span class="token string">"Form"</span><span class="token punctuation">,</span> <span class="token string">"主菜单"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>pushButton<span class="token punctuation">.</span>setText<span class="token punctuation">(</span>_translate<span class="token punctuation">(</span><span class="token string">"Form"</span><span class="token punctuation">,</span> <span class="token string">"测试"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
<ul>
<li>main.py</li>
</ul>
<pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 逻辑代码</span>
<span class="token comment" spellcheck="true"># -*- coding: utf-8 -*-</span>
<span class="token comment" spellcheck="true"># @Time    : 2021/5/18 10:19</span>
<span class="token comment" spellcheck="true"># @Author  : Wanghairui</span>
<span class="token comment" spellcheck="true"># @function:</span>
<span class="token keyword">import</span> sys

<span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span> pyqtSignal
<span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> QApplication<span class="token punctuation">,</span> QMainWindow<span class="token punctuation">,</span> QMessageBox
<span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>Qt <span class="token keyword">import</span> QThread
<span class="token keyword">from</span> testUI <span class="token keyword">import</span> Ui_Form
<span class="token keyword">from</span> queryUI <span class="token keyword">import</span> Ui_Dialog
<span class="token keyword">from</span> time <span class="token keyword">import</span> sleep


<span class="token keyword">class</span> <span class="token class-name">MyMainForm</span><span class="token punctuation">(</span>QMainWindow<span class="token punctuation">,</span> Ui_Form<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> parent<span class="token operator">=</span>None<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span>MyMainForm<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>parent<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>thread_query <span class="token operator">=</span> QueryThread<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># 创建线程</span>
        self<span class="token punctuation">.</span>setupUi<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>queryUI <span class="token operator">=</span> queryForm<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>pushButton<span class="token punctuation">.</span>clicked<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>query<span class="token punctuation">)</span>


    <span class="token keyword">def</span> <span class="token function">query</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment" spellcheck="true"># 绑定信号到指定回调</span>
        self<span class="token punctuation">.</span>thread_query<span class="token punctuation">.</span>signal<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>callback<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>queryUI<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>thread_query<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># 开始线程</span>

    <span class="token comment" spellcheck="true"># 回调函数</span>
    <span class="token keyword">def</span> <span class="token function">callback</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>queryUI<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
        QMessageBox<span class="token punctuation">.</span>about<span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token string">"完成"</span><span class="token punctuation">,</span> <span class="token string">"请求完成"</span><span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">queryForm</span><span class="token punctuation">(</span>QMainWindow<span class="token punctuation">,</span> Ui_Dialog<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> parent<span class="token operator">=</span>None<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span>queryForm<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>parent<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>setupUi<span class="token punctuation">(</span>self<span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">QueryThread</span><span class="token punctuation">(</span>QThread<span class="token punctuation">)</span><span class="token punctuation">:</span>
    signal <span class="token operator">=</span> pyqtSignal<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> None<span class="token punctuation">:</span>
        sleep<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>

        <span class="token comment" spellcheck="true"># 运行结束，发送信号执行回调</span>
        self<span class="token punctuation">.</span>signal<span class="token punctuation">.</span>emit<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    app <span class="token operator">=</span> QApplication<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>
    myWin <span class="token operator">=</span> MyMainForm<span class="token punctuation">(</span><span class="token punctuation">)</span>
    myWin<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span>app<span class="token punctuation">.</span>exec_<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2021/05/14/Python%E6%97%B6%E9%97%B4%E4%B8%8E%E6%97%B6%E9%97%B4%E6%88%B3%E4%BA%92%E8%BD%AC/">Python日期时间转换</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-05-14</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/python/">python</a></span><div class="content"><h4 id="Python日期时间转换"><a href="#Python日期时间转换" class="headerlink" title="Python日期时间转换"></a>Python日期时间转换</h4><ul>
<li><p>时间转时间戳（UNIX时间戳）</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> time
cus_date_time <span class="token operator">=</span> <span class="token string">"2021-05-11 00:00:00"</span>
timeArray <span class="token operator">=</span> time<span class="token punctuation">.</span>strptime<span class="token punctuation">(</span>cus_date_time<span class="token punctuation">,</span> <span class="token string">"%Y-%m-%d %H:%M:%S"</span><span class="token punctuation">)</span>
cus_timestamp <span class="token operator">=</span> time<span class="token punctuation">.</span>mktime<span class="token punctuation">(</span>timeArray<span class="token punctuation">)</span></code></pre>
</li>
</ul>
<ul>
<li><p>时间戳转时间</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> time

cus_timestamp <span class="token operator">=</span> <span class="token number">1620662400</span>

<span class="token comment" spellcheck="true"># 加time.timezone转为UTC时间，不加为系统时间</span>
time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%Y-%m-%d %H:%M:%S"</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>localtime<span class="token punctuation">(</span>cus_timestamp <span class="token operator">+</span> time<span class="token punctuation">.</span>timezone<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
</li>
</ul>
<ul>
<li><p>时间转字符串</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime
now <span class="token operator">=</span> datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>type<span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">)</span>
now_str <span class="token operator">=</span> now<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%Y-%m-%d %H:%M:%S"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>now_str<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>type<span class="token punctuation">(</span>now_str<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
</li>
</ul>
<ul>
<li><p>字符串转时间</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime
now_str <span class="token operator">=</span> <span class="token string">'2021-05-12 16:47:16'</span>
now <span class="token operator">=</span> datetime<span class="token punctuation">.</span>strptime<span class="token punctuation">(</span>now_str<span class="token punctuation">,</span> <span class="token string">"%Y-%m-%d %H:%M:%S"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>type<span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
</li>
</ul>
<ul>
<li><p>时间加减</p>
<pre class=" language-python"><code class="language-python"><span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime<span class="token punctuation">,</span> timedelta
now <span class="token operator">=</span> datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span>
now <span class="token operator">=</span> now <span class="token operator">+</span> timedelta<span class="token punctuation">(</span>days<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> hours<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span></code></pre>
</li>
</ul>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2021/03/22/CentOS7%E5%AE%89%E8%A3%85%E4%B8%89%E8%8A%82%E7%82%B9Hadoop%E9%9B%86%E7%BE%A4/">CentOS7安装三节点Hadoop集群</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-03-22</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a></span><div class="content"><h4 id="一-服务器配置"><a href="#一-服务器配置" class="headerlink" title="一 服务器配置"></a>一 服务器配置</h4><ul>
<li><p>关闭防火墙</p>
<pre class=" language-shell"><code class="language-shell"># 查看状态
firewall-cmd --state

# 停止防火墙
systemctl stop firewalld.service

# 禁止开机自启动
systemctl disable firewalld.service</code></pre>
</li>
<li><p>关闭selinux</p>
<pre class=" language-shell"><code class="language-shell">vi /etc/sysconfig/selinux

SELINUX=disabled</code></pre>
</li>
</ul>
<h4 id="二-网络配置"><a href="#二-网络配置" class="headerlink" title="二 网络配置"></a>二 网络配置</h4><ul>
<li><p>找到待配置网卡</p>
<pre class=" language-shell"><code class="language-shell">cd /etc/sysconfig/network-scripts/
ls

# 这里选择ifcfg-enp3s0

vi ifcfg-enp3s0</code></pre>
</li>
<li><p>修改下列配置</p>
<pre class=" language-shell"><code class="language-shell">BOOTPROTO=static
ONBOOT=yes
IPADDR=192.168.0.200
GATEWAY=192.168.0.1
DNS1=8.8.8.8</code></pre>
</li>
<li><p>网络测试</p>
<pre class=" language-shell"><code class="language-shell">service network restart
# 局域网测试
ping 192.168.0.229

# 外网测试
ping www.baidu.com</code></pre>
</li>
</ul>
<h4 id="三-安装Java"><a href="#三-安装Java" class="headerlink" title="三 安装Java"></a>三 安装Java</h4><ul>
<li><p>创建安装目录</p>
<pre class=" language-shell"><code class="language-shell">cd /home/whr
mkdir java
cd java</code></pre>
</li>
<li><p>安装wget</p>
<pre class=" language-shell"><code class="language-shell">yum -y install wget</code></pre>
</li>
</ul>
<ul>
<li><p>下载解压</p>
<p>使用wget下载或通过官网下载后，使用WinSCP传到 /home/whr/java 目录下</p>
<pre class=" language-shell"><code class="language-shell">cd /home/whr/java

tar -zxvf jdk-8u281-linux-x64.tar.gz</code></pre>
</li>
<li><p>设置环境变量</p>
<pre class=" language-shell"><code class="language-shell">vi /etc/profile

# 末尾添加
export JAVA_HOME=/home/whr/java/jdk1.8.0_281
export JRE_HOME=$&#123;JAVA_HOME&#125;/jre
export CLASSPATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/lib
export PATH=$&#123;JAVA_HOME&#125;/bin:$PATH

# 激活环境变量
source /etc/profile</code></pre>
</li>
<li><p>添加软链接</p>
<pre class=" language-shell"><code class="language-shell">ln -s /home/whr/java/jdk1.8.0_281/bin/java /usr/bin/java</code></pre>
</li>
<li><p>安装完成</p>
<pre class=" language-shell"><code class="language-shell">java -version</code></pre>
</li>
</ul>
<h4 id="四-配置hosts"><a href="#四-配置hosts" class="headerlink" title="四 配置hosts"></a>四 配置hosts</h4><ul>
<li><p>节点规划</p>
<table>
<thead>
<tr>
<th>IP</th>
<th>NodeType</th>
<th>Name</th>
</tr>
</thead>
<tbody><tr>
<td>192.168.0.200</td>
<td>DataNode</td>
<td>slave1</td>
</tr>
<tr>
<td>192.168.0.201</td>
<td>DataNode</td>
<td>slave2</td>
</tr>
<tr>
<td>192.168.0.202</td>
<td>NameNode / DataNode</td>
<td>master</td>
</tr>
</tbody></table>
</li>
<li><p>hosts 配置</p>
<pre class=" language-shell"><code class="language-shell">vi /etc/hosts

# 配置如下
127.0.0.1   localhost
192.168.0.200 slave1
192.168.0.201 slave2
192.168.0.202 master</code></pre>
</li>
</ul>
<h4 id="五-配置SSH（主节点）"><a href="#五-配置SSH（主节点）" class="headerlink" title="五 配置SSH（主节点）"></a>五 配置SSH（主节点）</h4><ul>
<li><p>修改配置文件</p>
<pre class=" language-shell"><code class="language-shell">vi /etc/ssh/sshd_config

AuthorizedKeysFile      .ssh/authorized_keys
PubkeyAuthentication yes</code></pre>
</li>
<li><p>生成秘钥</p>
<pre class=" language-shell"><code class="language-shell">ssh-keygen -t dsa -P '' -f ~/.ssh/id_dsa</code></pre>
</li>
</ul>
<ul>
<li><p>分发公钥</p>
<pre class=" language-shell"><code class="language-shell">ssh-copy-id -i ~/.ssh/id_dsa.pub master
ssh-copy-id -i ~/.ssh/id_dsa.pub slave1
ssh-copy-id -i ~/.ssh/id_dsa.pub slave2

# 验证
ssh master
ssh slave1
ssh slave2</code></pre>
</li>
</ul>
<h4 id="六-安装Hadoop（主节点）"><a href="#六-安装Hadoop（主节点）" class="headerlink" title="六 安装Hadoop（主节点）"></a>六 安装Hadoop（主节点）</h4><ul>
<li><p>下载</p>
<pre class=" language-shell"><code class="language-shell">cd /home/whr
mkdir hadoop
cd hadoop

wget https://mirrors.tuna.tsinghua.edu.cn/apache/hadoop/common/hadoop-3.2.1/hadoop-3.2.1.tar.gz
# 或本地下载使用WinSCP传送</code></pre>
</li>
<li><p>安装</p>
<pre class=" language-shell"><code class="language-shell">tar zxvf hadoop-3.2.1.tar.gz

# 创建软链接
ln -s /home/whr/hadoop/hadoop-3.2.1  /usr/local/hadoop</code></pre>
</li>
<li><p>配置Hadoop环境变量</p>
<pre class=" language-shell"><code class="language-shell">vi /etc/profile

# 末尾添加
export HADOOP_HOME=/home/whr/hadoop/hadoop-3.2.1
export PATH=$&#123;HADOOP_HOME&#125;/bin:$PATH

source /etc/profile</code></pre>
</li>
<li><p>修改配置文件</p>
<pre class=" language-shell"><code class="language-shell">cd /usr/local/hadoop/etc/hadoop</code></pre>
<ul>
<li><p>配置hadoop-env.sh</p>
<pre class=" language-shell"><code class="language-shell">vi hadoop-env.sh

export JAVA_HOME=/home/whr/java/jdk1.8.0_281</code></pre>
</li>
<li><p>配置core-site.xml</p>
<pre class=" language-shell"><code class="language-shell">vi core-site.xml

<configuration>
    <property>
      <name>hadoop.tmp.dir</name>
   <value>/home/whr/hadoop/tmp</value>
   <description>Abase for other temporary directories.</description>
    </property>

    <property>
      <name>fs.default.name</name>
      <value>hdfs://master:9000</value>
    </property>
</configuration></code></pre>
</li>
<li><p>配置hdfs-site.xml</p>
<pre class=" language-shell"><code class="language-shell">vi hdfs-site.xml

<configuration>
    <property>
      <name>dfs.namenode.name.dir</name>
      <value>/home/whr/hadoop/dfs/name</value>
    </property>
    <property>
      <name>dfs.datanode.data.dir</name>
      <value>/home/whr/hadoop/dfs/data</value>
    </property>
</configuration></code></pre>
</li>
<li><p>配置yarn-site.xml</p>
<pre class=" language-shell"><code class="language-shell">vi yarn-site.xml

<configuration>
    <property>
      <name>yarn.nodemanager.aux-services</name>
      <value>mapreduce_shuffle</value>
    </property>
    <property>
      <name>yarn.nodemanager.aux-services.mapreduce_shuffle.class</name>
      <value>org.apache.hadoop.mapred.ShuffleHandler</value>
    </property>
    <property>
      <name>yarn.resourcemanager.hostname</name>
      <value>master</value>
    </property>
</configuration></code></pre>
</li>
<li><p>配置mapred-site.xml</p>
<pre class=" language-shell"><code class="language-shell">vi mapred-site.xml

<configuration>
    <property>
      <name>mapred.job.tracker</name>
      <value>master:49001</value>
    </property>
    <property>
      <name>mapred.local.dir</name>
      <value>/home/whr/hadoop/var</value>
    </property>
    <property>
      <name>mapreduce.framework.name</name>
      <value>yarn</value>
    </property>
</configuration></code></pre>
</li>
<li><p>配置workers</p>
<pre class=" language-shell"><code class="language-shell">vi workers

master
slave1
slave2</code></pre>
</li>
<li><p>修改hdfs启动和停止脚本</p>
<pre class=" language-shell"><code class="language-shell">cd /usr/local/hadoop/sbin

vi start-dfs.sh
vi stop-dfs.sh

# 在最前面加如下内容
HDFS_DATANODE_USER=root
HADOOP_SECURE_DN_USER=root
HDFS_NAMENODE_USER=root
HDFS_SECONDARYNAMENODE_USER=root</code></pre>
</li>
<li><p>修改yarn启动和停止脚本</p>
<pre class=" language-shell"><code class="language-shell">cd /usr/local/hadoop/sbin

vi start-yarn.sh
vi stop-yarn.sh
# 在文件前添加如下内容
YARN_RESOURCEMANAGER_USER=root
HADOOP_SECURE_DN_USER=root
YARN_NODEMANAGER_USER=root</code></pre>
</li>
</ul>
</li>
<li><p>从节点配置Hadoop</p>
<pre class=" language-shell"><code class="language-shell"># 将配置好的Hadoop复制到从节点
scp -r /home/whr/hadoop/hadoop-3.2.1 root@192.168.0.201:/home/whr/hadoop/

# 设置软链接
ssh slave1
ln -s /home/whr/hadoop/hadoop-3.2.1  /usr/local/hadoop
exit

ssh slave2
ln -s /home/whr/hadoop/hadoop-3.2.1  /usr/local/hadoop
exit</code></pre>
</li>
</ul>
<h4 id="七-启动测试"><a href="#七-启动测试" class="headerlink" title="七 启动测试"></a>七 启动测试</h4><ul>
<li><p>格式化namenode</p>
<pre class=" language-shell"><code class="language-shell">hdfs namenode -format

# 重新格式化需要删除tmp和dfs文件夹</code></pre>
</li>
<li><p>启动hdfs</p>
<pre class=" language-shell"><code class="language-shell">cd /usr/local/hadoop/sbin

bash start-all.sh</code></pre>
</li>
<li><p>启动yarn</p>
<pre class=" language-shell"><code class="language-shell">bash start-all.sh</code></pre>
</li>
<li><p>验证</p>
<pre class=" language-shell"><code class="language-shell">jps

4800 NodeManager
4002 NameNode
4387 SecondaryNameNode
4666 ResourceManager
13355 Jps
4126 DataNode

</code></pre>
</li>
</ul>
<h1 id="客户端访问"><a href="#客户端访问" class="headerlink" title="客户端访问"></a>客户端访问</h1><p>  <a target="_blank" rel="noopener" href="http://192.168.0.202:9870/">http://192.168.0.202:9870/</a><br>  <a target="_blank" rel="noopener" href="http://192.168.0.202:8088/">http://192.168.0.202:8088/</a></p>
<pre><code>

</code></pre>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2021/03/05/Pyinstaller%20%E6%89%93%E5%8C%85%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%A4%B9/">Pyinstaller打包配置文件</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-03-05</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/python/">python</a></span><div class="content"><p>Pyinstaller 打包配置文件夹</p></div><a class="more" href="/2021/03/05/Pyinstaller%20%E6%89%93%E5%8C%85%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%A4%B9/#more">Read more</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2021/03/02/%E4%B8%80%E6%AC%A1%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E8%B8%A9%E5%9D%91/">一次虚拟环境踩坑</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-03-02</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/python/">python</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/pip/">pip</a></span><div class="content"><a id="more"></a>

<p>Python venv虚拟环境 pip安装失败， 实际环境安装成功</p>
<pre><code>pip install --upgrade pip 🤬🤬🤬</code></pre>
<p>当由于权限更新失败后，运行easy_install pip</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2021/01/26/Selenium%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E4%BF%A1%E6%81%AF/">Selenium获取请求信息</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-01-26</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/%E7%88%AC%E8%99%AB/">爬虫</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/selenium/">selenium</a></span><div class="content"><h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>​    在获取facebook analytics数据时，抓取到的请求需要携带token，且具有时效性。</p></div><a class="more" href="/2021/01/26/Selenium%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E4%BF%A1%E6%81%AF/#more">Read more</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2021/01/19/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E9%95%9C%E5%83%8F/">Python剑指27 - 二叉树的镜像</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-01-19</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/%E5%89%91%E6%8C%87offer/">剑指offer</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/%E6%A0%91/">树</a></span><div class="content"><blockquote>
<p><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/er-cha-shu-de-jing-xiang-lcof/">题目来源</a></p>
</blockquote>
<ul>
<li><p>描述</p>
<p>请完成一个函数，输入一个二叉树，该函数输出它的镜像。</p></div><a class="more" href="/2021/01/19/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E9%95%9C%E5%83%8F/#more">Read more</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2021/01/18/%E5%B9%B6%E6%9F%A5%E9%9B%86%E5%8F%8APython%E5%AE%9E%E7%8E%B0/">并查集及Python实现</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-01-18</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/%E5%B9%B6%E6%9F%A5%E9%9B%86/">并查集</a></span><div class="content"><blockquote>
<p>并查集：在计算机科学中，<strong>并查集</strong>是一种树型的<strong>数据结构</strong>，用于处理一些<strong>不交集</strong>（Disjoint Sets）的合并及查询问题。   —wiki</p>
</blockquote></div><a class="more" href="/2021/01/18/%E5%B9%B6%E6%9F%A5%E9%9B%86%E5%8F%8APython%E5%AE%9E%E7%8E%B0/#more">Read more</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2021/01/18/%E6%AF%94%E8%BE%83%E4%B8%A4%E4%B8%AAdataframe%E7%9A%84%E5%B7%AE%E5%BC%82/">比较两个dataframe的差异</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-01-18</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/python/">python</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/pandas/">pandas</a></span><div class="content"><blockquote>
<p>参考来源：<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/20225110/comparing-two-dataframes-and-getting-the-differences">https://stackoverflow.com/questions/20225110/comparing-two-dataframes-and-getting-the-differences</a></p>
</blockquote></div><a class="more" href="/2021/01/18/%E6%AF%94%E8%BE%83%E4%B8%A4%E4%B8%AAdataframe%E7%9A%84%E5%B7%AE%E5%BC%82/#more">Read more</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2021/01/07/pandas%E6%80%BB%E7%BB%93/">pandas浅析</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-01-07</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/python/">python</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/pandas/">pandas</a></span><div class="content"><h4 id="创建DataFrame"><a href="#创建DataFrame" class="headerlink" title="创建DataFrame"></a>创建DataFrame</h4><p>​</div><a class="more" href="/2021/01/07/pandas%E6%80%BB%E7%BB%93/#more">Read more</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/11/20/Python%E8%A3%85%E9%A5%B0%E5%99%A8%E5%AE%9E%E7%8E%B0%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/">Python装饰器实现日志输出</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-11-20</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/python/">python</a></span><div class="content"><a id="more"></a>
<pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># -*- coding: utf-8 -*-</span>
<span class="token comment" spellcheck="true"># @Time    : 2020/11/20 11:33</span>
<span class="token comment" spellcheck="true"># @Author  : Wanghairui</span>
<span class="token comment" spellcheck="true"># @function:</span>
<span class="token keyword">from</span> functools <span class="token keyword">import</span> wraps
<span class="token keyword">import</span> logging


<span class="token keyword">def</span> <span class="token function">_create_logger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    logger <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span><span class="token string">'LogError'</span><span class="token punctuation">)</span>
    logger<span class="token punctuation">.</span>setLevel<span class="token punctuation">(</span>logging<span class="token punctuation">.</span>ERROR<span class="token punctuation">)</span>
    file_handler <span class="token operator">=</span> logging<span class="token punctuation">.</span>FileHandler<span class="token punctuation">(</span>r<span class="token string">'./MJlogs.log'</span><span class="token punctuation">)</span>

    log_format <span class="token operator">=</span> <span class="token string">'%(levelname)s %(asctime)s %(message)s'</span>
    formatter <span class="token operator">=</span> logging<span class="token punctuation">.</span>Formatter<span class="token punctuation">(</span>log_format<span class="token punctuation">)</span>
    file_handler<span class="token punctuation">.</span>setFormatter<span class="token punctuation">(</span>formatter<span class="token punctuation">)</span>

    logger<span class="token punctuation">.</span>addHandler<span class="token punctuation">(</span>file_handler<span class="token punctuation">)</span>
    <span class="token keyword">return</span> logger


<span class="token keyword">def</span> <span class="token function">logged</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span>
    @wraps<span class="token punctuation">(</span>func<span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">do_logging</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> func<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>
        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
            logger <span class="token operator">=</span> _create_logger<span class="token punctuation">(</span><span class="token punctuation">)</span>
            error_msg <span class="token operator">=</span> <span class="token string">'And error has occurred at /'</span> <span class="token operator">+</span> func<span class="token punctuation">.</span>__name__ <span class="token operator">+</span> <span class="token string">'\n'</span>
            logger<span class="token punctuation">.</span>exception<span class="token punctuation">(</span>error_msg<span class="token punctuation">)</span>
            <span class="token keyword">return</span> e
    <span class="token keyword">return</span> do_logging</code></pre>
</div><hr></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image: url(https://i.loli.net/2021/01/14/aJn4RNHLOvf3dDj.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2018 - 2021 By Hairui Wang</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.0"></script><script src="/js/fancybox.js?version=1.9.0"></script><script src="/js/sidebar.js?version=1.9.0"></script><script src="/js/copy.js?version=1.9.0"></script><script src="/js/fireworks.js?version=1.9.0"></script><script src="/js/transition.js?version=1.9.0"></script><script src="/js/scroll.js?version=1.9.0"></script><script src="/js/head.js?version=1.9.0"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>